{"version":3,"sources":["..\\..\\src\\array.js"],"names":[],"mappings":"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","file":"src/array.js","sourcesContent":["import _ from \"lodash\"\r\nimport defineType from \"./defineType\"\r\nimport BaseType from \"./BaseType\"\r\nimport number from \"./number\"\r\nimport string from \"./string\"\r\nimport {generateWithDefault} from \"./defineTypeUtils\"\r\n\r\nexport default class _Array extends BaseType {\r\n\r\n    static defaults() { return []; }\r\n\r\n    static test(value) { return Array.isArray(value); }\r\n\r\n    static wrapValue(value, spec, isReadOnly, options) {\r\n\r\n        if(value instanceof BaseType) {\r\n            return value.__value__.map((itemValue) => {\r\n                return this._wrapSingleItem(itemValue, isReadOnly, options);\r\n            }, this);\r\n        }\r\n\r\n        return value.map((itemValue) => {\r\n            return this._wrapSingleItem(itemValue, isReadOnly, options);\r\n        }, this);\r\n    }\r\n\r\n    static _wrapSingleItem(itemValue, isReadOnly, options) {\r\n        if(itemValue instanceof BaseType) {\r\n            return itemValue;\r\n        } else if(typeof options.subTypes === 'function') {\r\n            return options.subTypes.create(itemValue, isReadOnly, options.subTypes.options);\r\n        } else if(typeof options.subTypes === 'object') {\r\n\r\n            var subType = options.subTypes[\r\n                itemValue._type ? itemValue._type  :\r\n                number.test(itemValue) ? '_Number' :\r\n                string.test(itemValue) ? '_String' :\r\n                Object.keys(options.subTypes)[0]\r\n            ];\r\n\r\n            return subType.create(itemValue, isReadOnly, subType.options);\r\n        }\r\n    }\r\n\r\n    static of(subTypes, defaults, test) {\r\n        return this.withDefault(defaults, test, { subTypes });\r\n    };\r\n\r\n    constructor(value=[], isReadOnly=false, options={}) {\r\n        if(options.subTypes && _.isArray(options.subTypes)) {\r\n            options.subTypes = options.subTypes.reduce(function(subTypes, type) {\r\n                subTypes[type.displayName || type.name] = type;\r\n                return subTypes;\r\n            }, {});\r\n        }\r\n\r\n        super(value, isReadOnly, options);\r\n        // BaseType.call(this, value, isReadOnly, options);\r\n    }\r\n\r\n    toJSON() {\r\n        return this.__value__.map(item => {\r\n            return (item instanceof BaseType) ? item.toJSON() : item;\r\n        });\r\n    }\r\n\r\n    at(index) {\r\n        var item = this.__value__[index];\r\n        return (this.__isReadOnly__ && item instanceof BaseType) ? item.$asReadOnly() : item;\r\n    }\r\n\r\n    push(...newItems) {\r\n        if(this.__isReadOnly__) {\r\n            return null;\r\n        }\r\n\r\n        this.__isInvalidated__= true;\r\n\r\n        var options = this.__options__;\r\n\r\n        return Array.prototype.push.apply(\r\n            this.__value__,\r\n            newItems.map((item) => this.constructor._wrapSingleItem(item, false, options))\r\n        );\r\n    }\r\n\r\n    forEach(cb) {\r\n        var that = this;\r\n        this.__value__.forEach(function(item, index, arr) {\r\n            cb(item,index,that);\r\n        });\r\n    }\r\n\r\n    map(cb, ctx) {\r\n        this.__value__.map(function(item, index, arr) {\r\n            return cb(item, index, this);\r\n        }, ctx || this);\r\n\r\n    }\r\n\r\n    splice(index, removeCount, ...addedItems) {\r\n        if(this.__isReadOnly__) {\r\n            return null;\r\n        }\r\n        this.__isInvalidated__= true;\r\n        var spliceParams = [index,removeCount];\r\n        addedItems.forEach(function(newItem) {\r\n           spliceParams.push(this.constructor._wrapSingleItem(newItem, this.__isReadOnly__, this.__options__))\r\n        }.bind(this));\r\n        return this.__value__.splice.apply(this.__value__,spliceParams);\r\n        //return this.__value__.push(this.constructor._wrapSingleItem(newItem, this.__isReadOnly__, this.__options__));\r\n    }\r\n\r\n\r\n    concat(...addedArrays) {\r\n        return this.constructor.create(Array.prototype.concat.apply(this.__value__, addedArrays.map((array) => array.__value__ || array)), this.__isReadOnly__, this.__options__);\r\n    }\r\n\r\n    every(cb) {\r\n        var self = this;\r\n        return this.__value__.every(function(element, index, array) {\r\n            return cb(element, index, self)\r\n        });\r\n    }\r\n\r\n    some(cb) {\r\n        var self = this;\r\n        return this.__value__.some(function(element, index, array) {\r\n            return cb(element, index, self);\r\n        });\r\n    }\r\n\r\n    find(cb) {\r\n        var self = this;\r\n        return _.find(this.__value__, function(element, index, array) {\r\n            return cb(element, index, self);\r\n        });\r\n        return _.find(this.__value__, cb);\r\n    }\r\n\r\n    findIndex(cb) {\r\n        var self = this;\r\n        return _.findIndex(this.__value__, function (element, index, array) {\r\n            return cb(element, index, self)\r\n        })\r\n        return _.findIndex(this.__value__, cb);\r\n    }\r\n\r\n    filter(cb) {\r\n        var self = this;\r\n        var filteredArray = this.__value__.filter(function(element, index, array) {\r\n            return cb(element, index, self);\r\n        });\r\n        return new this.constructor(filteredArray, false, this.__options__);\r\n    }\r\n\r\n    setValue(newValue) {\r\n        if(newValue instanceof _Array) {\r\n            newValue = newValue.toJSON();\r\n        }\r\n        if(_.isArray(newValue)) {\r\n            this.__value__ = [];\r\n            _.forEach(newValue, (itemValue) => {\r\n                this.push(itemValue);\r\n            });\r\n        }\r\n    }\r\n\r\n    $asReadOnly() {\r\n        if(!this.__readOnlyInstance__) {\r\n            this.__readOnlyInstance__ = this.constructor.type.create(this.__value__, true, this.__options__);\r\n        }\r\n        return this.__readOnlyInstance__;\r\n    }\r\n\r\n    $isInvalidated() {\r\n\r\n        if(this.__isInvalidated__==-1) {\r\n            var invalidatedField = _.find(this.__value__, (item, index)=>{\r\n                if(item instanceof BaseType) {\r\n                    return item.$isInvalidated();\r\n                }\r\n            });\r\n            if(invalidatedField) {\r\n                this.__isInvalidated__ = true;\r\n            }else{\r\n                this.__isInvalidated__ = false;\r\n            }\r\n        }\r\n        return this.__isInvalidated__;\r\n    }\r\n\r\n    $revalidate() {\r\n        this.__isInvalidated__ = -1;\r\n        _.forEach(this.__value__, (item, index)=>{\r\n            if(item instanceof BaseType) {\r\n                item.$revalidate();\r\n            }\r\n        });\r\n    }\r\n\r\n    $resetValidationCheck() {\r\n        this.__isInvalidated__ = this.__isInvalidated__ || -1;\r\n        _.forEach(this.__value__, (item, index)=>{\r\n            if(item instanceof BaseType) {\r\n                item.$resetValidationCheck();\r\n            }\r\n        });\r\n    }\r\n\r\n}\r\n\r\n_Array.withDefault = generateWithDefault();\r\n\r\n\r\n\r\n//['map', 'filter', 'every', 'forEach'].map(function(key) {\r\n['map'].map(function(key) {\r\n\r\n    var loFn = _[key];\r\n\r\n    _Array.prototype[key] = function(fn, ctx) {\r\n\r\n        return loFn(this.__value__, function() {\r\n            return fn.apply(ctx || this, arguments);\r\n        });\r\n\r\n    }\r\n});\r\n\r\ndefineType('Array',{\r\n    spec: function() {\r\n        return {\r\n            length: number.withDefault(0)\r\n        };\r\n    }\r\n}, _Array);\r\n"]}