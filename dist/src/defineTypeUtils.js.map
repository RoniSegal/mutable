<<<<<<< Updated upstream
{"version":3,"sources":["..\\..\\src\\defineTypeUtils.js"],"names":[],"mappings":"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","file":"src/defineTypeUtils.js","sourcesContent":["import _ from \"lodash\"\r\nimport BaseType from \"./BaseType\"\r\n\r\nexport function generateTest(){ // ToDo: check if its better jit-wise to move the spec to the closure: generateTestForSpec(spec)\r\n    return function(val){\r\n        return Object.keys(this._spec).every(function(key){\r\n            return this._spec[key].test(val[key])\r\n        }, this);\r\n    };\r\n}\r\n\r\nexport function generateFieldsOn(obj, fieldsDefinition){\r\n    _.forEach(fieldsDefinition, (fieldDef, fieldName) => {\r\n        if(obj[fieldName]){throw new Error('fields that starts with $ character are reserved \"'+ obj.constructor.displayName + '.' + fieldName+'\".')}\r\n        Object.defineProperty(obj, fieldName, {\r\n            get: function(){\r\n                if(this.__isReadOnly__) {\r\n                    return (fieldDef.type.prototype instanceof BaseType) ? this.__value__[fieldName].$asReadOnly() : this.__value__[fieldName];\r\n                } else {\r\n                    return this.__value__[fieldName];\r\n                }\r\n            },\r\n            set: function(newValue){\r\n                this.__isInvalidated__ = true;\r\n\r\n                if(this.__isReadOnly__) {\r\n                    console.warn('try to set value to readonly field: ', this.constructor.displayName +'.'+fieldName, '=', newValue);\r\n                } else if(fieldDef.type.prototype instanceof BaseType) {\r\n                    this.__value__[fieldName].setValue(newValue);\r\n                } else {\r\n                    this.__value__[fieldName] = newValue;\r\n                }\r\n            },\r\n            enumerable:true,\r\n            configurable:false\r\n        });\r\n    });\r\n}\r\n\r\nexport function generateWithDefault(){\r\n    return function withDefault(defaults, test, options){\r\n\t\toptions = options || this.options;\r\n        var def = defaults ? function(){ return _.clone(defaults, true); } : this.defaults;\r\n\r\n        function typeWithDefault(value, isReadOnly, options){\r\n            return typeWithDefault.type.create(value, isReadOnly, typeWithDefault.options || options);\r\n        }\r\n\r\n        typeWithDefault.type = this.type || this;\r\n        typeWithDefault.test = test || this.test;\r\n        typeWithDefault.withDefault = withDefault//.bind(this);\r\n        typeWithDefault.defaults = def;\r\n        typeWithDefault.options = options;\r\n        typeWithDefault.wrapValue = this.wrapValue;\r\n        typeWithDefault.create = this.create;\r\n        return typeWithDefault;\r\n    }\r\n}\r\n\r\nexport function generateWithDefaultForSysImmutable(Type){\r\n    return function withDefault(defaults, test){\r\n\t\r\n\t\tvar def = defaults ? function(){ return defaults; } : this.defaults;\r\n\r\n        function typeWithDefault(value, isReadOnly){\r\n            return Type(value);\r\n        }\r\n        typeWithDefault.type = this.type;\r\n        typeWithDefault.test = test || this.test;\r\n        typeWithDefault.withDefault = this.withDefault//.bind(this);\r\n        typeWithDefault.defaults = def;\r\n        typeWithDefault.wrapValue = Type;\r\n        typeWithDefault.create = this.create;\r\n        return typeWithDefault;\r\n    }\r\n}\r\n\r\nexport function generateGetDefaultValue(){\r\n    return function() {\r\n        var spec = this._spec;\r\n        var args = arguments;\r\n        return Object.keys(this._spec).reduce(function (val, key) {\r\n            var fieldSpec = spec[key];\r\n            val[key] = fieldSpec.defaults.apply(fieldSpec, args);\r\n            return val;\r\n        }, {});\r\n    }\r\n}\r\n"]}
=======
{"version":3,"sources":["../../src/defineTypeUtils.js"],"names":[],"mappings":"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","file":"src/defineTypeUtils.js","sourcesContent":["import _ from \"lodash\"\nimport BaseType from \"./BaseType\"\n\nexport function generateTest(){ // ToDo: check if its better jit-wise to move the spec to the closure: generateTestForSpec(spec)\n    return function(val){\n        return Object.keys(this._spec).every(function(key){\n            return this._spec[key].test(val[key])\n        }, this);\n    };\n}\n\nexport function generateFieldsOn(obj, fieldsDefinition){\n    _.forEach(fieldsDefinition, (fieldDef, fieldName) => {\n        if(obj[fieldName]){throw new Error('fields that starts with $ character are reserved \"'+ obj.constructor.displayName + '.' + fieldName+'\".')}\n        Object.defineProperty(obj, fieldName, {\n            get: function(){\n                if(this.__isReadOnly__) {\n                    return (fieldDef.type.prototype instanceof BaseType) ? this.__value__[fieldName].$asReadOnly() : this.__value__[fieldName];\n                } else {\n                    return this.__value__[fieldName];\n                }\n            },\n            set: function(newValue){\n                this.__isInvalidated__ = true;\n\n                if(this.__isReadOnly__) {\n                    console.warn('try to set value to readonly field: ', this.constructor.displayName +'.'+fieldName, '=', newValue);\n                } else if(fieldDef.type.prototype instanceof BaseType) {\n                    this.__value__[fieldName].setValue(newValue);\n                } else {\n                    this.__value__[fieldName] = newValue;\n                }\n            },\n            enumerable:true,\n            configurable:false\n        });\n    });\n}\n\nexport function generateWithDefault(){\n    return function withDefault(defaults, test, options){\n        var def = this.defaults;\n        if(defaults !== undefined){ // ToDo: clone defaults (add test)\n            def = (typeof defaults === 'function') ? defaults : function(){ return _.clone(defaults, true); };\n        }\n\n        function typeWithDefault(value, isReadOnly, options){\n            return typeWithDefault.type.create(value, isReadOnly, typeWithDefault.options || options);\n        }\n\n        typeWithDefault.type = this;\n        typeWithDefault.test = test || this.test;\n        typeWithDefault.withDefault = withDefault.bind(this);\n        typeWithDefault.defaults = def;\n        typeWithDefault.options = options;\n        typeWithDefault.wrapValue = this.wrapValue;\n        typeWithDefault.create = this.create;\n        return typeWithDefault;\n    }\n}\n\nexport function generateWithDefaultForSysImmutable(Type){\n    return function withDefault(defaults, test){\n        var def = this.defaults;\n        if(defaults !== undefined){\n            def = (typeof defaults === 'function') ? defaults : function(){ return defaults; };\n        }\n\n        function typeWithDefault(value, isReadOnly){\n            return Type(value);\n        }\n        typeWithDefault.type = this.type;\n        typeWithDefault.test = test || this.test;\n        typeWithDefault.withDefault = this.withDefault.bind(this);\n        typeWithDefault.defaults = def;\n        typeWithDefault.wrapValue = Type;\n        typeWithDefault.create = this.create;\n        return typeWithDefault;\n    }\n}\n\nexport function generateGetDefaultValue(){\n    return function() {\n        var spec = this._spec;\n        var args = arguments;\n        return Object.keys(this._spec).reduce(function (val, key) {\n            var fieldSpec = spec[key];\n            val[key] = fieldSpec.defaults.apply(fieldSpec, args);\n            return val;\n        }, {});\n    }\n}\n"]}
>>>>>>> Stashed changes
